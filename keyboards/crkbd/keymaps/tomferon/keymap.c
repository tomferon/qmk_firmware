/*
Copyright 2019 @foostan
Copyright 2020 Drashna Jaelre <@drashna>
Copyright 2021 Elliot Powell  <@e11i0t23>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

#include QMK_KEYBOARD_H

#define _____ _______
#define ______ _______

#define XXXXX XXXXXXX
#define XXXXXX XXXXXXX

#define LAYER_MACOS 0
#define LAYER_WINDOWS 1
#define LAYER_NUMBER 2
#define LAYER_SYMBOLS 3
#define LAYER_FN 4

#define M_MAC MO(LAYER_MACOS)
#define M_WIN MO(LAYER_WINDOWS)
#define M_NUM MO(LAYER_NUMBER)
#define M_SYM MO(LAYER_SYMBOLS)
#define M_FN  MO(LAYER_FN)

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [LAYER_MACOS] = LAYOUT_split_3x6_3(
  //,--------------------------------------------------------------------------------------------.                    ,-------------------------------------------------------------------------------------------------.
       KC_TAB,              KC_Q,              KC_W,              KC_E,              KC_R,   KC_T,                        KC_Y,              KC_U,              KC_I,              KC_O,                 KC_P,    KC_ESC,
  //|--------+------------------+------------------+------------------+------------------+-------|                    |-------+------------------+------------------+------------------+---------------------+----------|
      KC_BSPC, MT(MOD_LGUI,KC_A), MT(MOD_LALT,KC_S), MT(MOD_LCTL,KC_D), MT(MOD_LSFT,KC_F),   KC_G,                        KC_H, MT(MOD_RSFT,KC_J), MT(MOD_RCTL,KC_K), MT(MOD_LALT,KC_L), MT(MOD_LGUI,KC_SCLN),   KC_QUOT,
  //|--------+------------------+------------------+------------------+------------------+-------|                    |-------+------------------+------------------+------------------+---------------------+----------|
       KC_GRV,              KC_Z,              KC_X,              KC_C,              KC_V,   KC_B,                        KC_N,              KC_M,           KC_COMM,            KC_DOT,              KC_SLSH, QK_LEADER,
  //|--------+------------------+------------------+------------------+------------------+-------+--------|  |--------+-------+------------------+------------------+------------------+---------------------+----------|
                                                                                  KC_LGUI,  M_NUM,  KC_SPC,     KC_ENT,  M_SYM,              M_FN
                                                                    //`-----------------------------------'  `-----------------------------------'
  ),

  [LAYER_WINDOWS] = LAYOUT_split_3x6_3(
  //,--------------------------------------------------------------------------------------------.                    ,-------------------------------------------------------------------------------------------------.
       ______,             _____,             _____,             _____,             _____,  _____,                       _____,             _____,             _____,             _____,                _____,    ______,
  //|--------+------------------+------------------+------------------+------------------+-------|                    |-------+------------------+------------------+------------------+---------------------+----------|
       ______, MT(MOD_LCTL,KC_A),             _____,             _____,             _____,  _____,                       _____,             _____,             _____,             _____, MT(MOD_LCTL,KC_SCLN),    ______,
  //|--------+------------------+------------------+------------------+------------------+-------|                    |-------+------------------+------------------+------------------+---------------------+----------|
       ______,             _____,             _____,             _____,             _____,  _____,                       _____,             _____,             _____,             _____,                _____,    ______,
  //|--------+------------------+------------------+------------------+------------------+-------+--------|  |--------+-------+------------------+------------------+------------------+---------------------+----------|
                                                                                  KC_LALT,  _____,  ______,     ______, ______,             _____
                                                                    //`-----------------------------------'  `-----------------------------------'
  ),

  [LAYER_NUMBER] = LAYOUT_split_3x6_3(
  //,--------------------------------------------------------------------------------------------.                    ,-------------------------------------------------------------------------------------------------.
       KC_TAB,           KC_MUTE,           KC_MPLY,           KC_VOLD,           KC_VOLU,  XXXXX,                        KC_1,              KC_2,              KC_3,              KC_4,                 KC_5,    KC_ESC,
  //|--------+------------------+------------------+------------------+------------------+-------|                    |-------+------------------+------------------+------------------+---------------------+----------|
      KC_BSPC,           KC_LGUI,           KC_LALT,           KC_LCTL,           KC_LSFT,  XXXXX,                     KC_LEFT,           KC_DOWN,             KC_UP,          KC_RIGHT,               XXXXXX,    XXXXXX,
  //|--------+------------------+------------------+------------------+------------------+-------|                    |-------+------------------+------------------+------------------+---------------------+----------|
       XXXXXX,             XXXXX,             XXXXX,           KC_MPRV,           KC_MNXT,  XXXXX,                        KC_6,              KC_7,              KC_8,              KC_9,                 KC_0,    XXXXXX,
  //|--------+------------------+------------------+------------------+------------------+-------+--------|  |--------+-------+------------------+------------------+------------------+---------------------+----------|
                                                                                  KC_LGUI,  XXXXX,  KC_SPC,     KC_ENT,  XXXXX,           KC_RALT
                                                                    //`-----------------------------------'  `-----------------------------------'
  ),

  [LAYER_SYMBOLS] = LAYOUT_split_3x6_3(
  //,--------------------------------------------------------------------------------------------.                    ,-------------------------------------------------------------------------------------------------.
       KC_TAB,           KC_EXLM,             KC_AT,           KC_HASH,            KC_DLR,KC_PERC,                       XXXXX,             XXXXX,             XXXXX,            XXXXXX,               XXXXXX,    KC_ESC,
  //|--------+------------------+------------------+------------------+------------------+-------|                    |-------+------------------+------------------+------------------+---------------------+----------|
      KC_BSPC,           KC_AMPR,           KC_ASTR,           KC_LPRN,           KC_RPRN,KC_CIRC,                       XXXXX,           KC_LSFT,           KC_LCTL,           KC_LALT,              KC_LGUI,    XXXXXX,
  //|--------+------------------+------------------+------------------+------------------+-------|                    |-------+------------------+------------------+------------------+---------------------+----------|
       KC_GRV,          KC_MINUS,            KC_EQL,           KC_LBRC,           KC_RBRC,KC_BSLS,                       XXXXX,             XXXXX,             XXXXX,             XXXXX,                XXXXX,    XXXXXX,
  //|--------+------------------+------------------+------------------+------------------+-------+--------|  |--------+-------+------------------+------------------+------------------+---------------------+----------|
                                                                                  KC_LGUI,  XXXXX,  KC_SPC,     KC_ENT,  XXXXX,             XXXXX
                                                                    //`-----------------------------------'  `-----------------------------------'
  ),

  [LAYER_FN] = LAYOUT_split_3x6_3(
  //,--------------------------------------------------------------------------------------------.                    ,-------------------------------------------------------------------------------------------------.
       XXXXXX,             KC_F1,             KC_F2,             KC_F3,             KC_F4,  KC_F5,                     QK_BOOT,            XXXXX,             XXXXX,            XXXXXX,               XXXXXX,    KC_ESC,
  //|--------+------------------+------------------+------------------+------------------+-------|                    |-------+------------------+------------------+------------------+---------------------+----------|
       XXXXXX,             KC_F6,             KC_F7,             KC_F8,             KC_F9, KC_F10,                       XXXXX,           KC_LSFT,           KC_LCTL,           KC_LALT,              KC_LGUI,    XXXXXX,
  //|--------+------------------+------------------+------------------+------------------+-------|                    |-------+------------------+------------------+------------------+---------------------+----------|
       XXXXXX,            XXXXXX,            XXXXXX,            KC_F11,            KC_F12,  XXXXX,                       XXXXX,             XXXXX,             XXXXX,             XXXXX,                XXXXX,    XXXXXX,
  //|--------+------------------+------------------+------------------+------------------+-------+--------|  |--------+-------+------------------+------------------+------------------+---------------------+----------|
                                                                                  KC_LGUI,  XXXXX,  KC_SPC,     KC_ENT,  XXXXX,             XXXXX
                                                                    //`-----------------------------------'  `-----------------------------------'
  ),
};

uint16_t get_tapping_term(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
        case MT(MOD_LSFT, KC_F):
            return TAPPING_TERM_FAST;
        case MT(MOD_RSFT, KC_J):
            return TAPPING_TERM_FAST;
        case MT(MOD_LCTL, KC_D):
            return TAPPING_TERM_FAST;
        case MT(MOD_RCTL, KC_K):
            return TAPPING_TERM_FAST;
        default:
            return TAPPING_TERM;
    }
}

void leader_start_user(void) {
}

void leader_end_user(void) {
    if (leader_sequence_three_keys(KC_W, KC_I, KC_N)) {
        layer_move(LAYER_WINDOWS);
    } else if (leader_sequence_three_keys(KC_M, KC_A, KC_C)) {
        layer_move(LAYER_MACOS);
    }
}

